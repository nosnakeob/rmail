# 技术栈

## 构建系统
- **Cargo**: Rust 的包管理器和构建工具
- **版本**: 2024 (最新的 Rust 版本)

## 核心依赖
- **async-imap (0.11)**: 用于接收邮件的异步 IMAP 客户端
- **async-native-tls (0.5)**: 异步 TLS 连接实现
- **futures (0.3)**: 异步编程基础库
- **mail-parser (0.11)**: 邮件解析和处理
- **tokio (1.47)**: 具有完整功能的异步运行时
- **tokio-util (0.7)**: Tokio 实用工具，用于兼容性
- **anyhow (1.0)**: 错误处理和上下文
- **serde (1.0)**: 序列化和反序列化框架
- **toml (0.9)**: TOML 配置文件解析
- **log (0.4)**: 结构化日志记录

## 开发依赖
- **env_logger (0.11)**: 环境变量配置的日志实现

## 架构模式
- **异步设计**: 使用异步 I/O 操作提高性能和并发性
- **错误处理**: 一致使用 `anyhow::Result<T>` 进行错误传播
- **TOML 配置**: 通过 config.toml 文件管理凭据和设置
- **模块化设计**: 配置和邮件接收功能分离到不同模块
- **配置验证**: 启动时验证配置完整性和有效性
- **日志系统**: 使用结构化日志替代直接打印输出
- **类型转换**: 实现 `TryFrom` trait 进行安全的类型转换
- **常量管理**: 使用常量替代魔法字符串

## 常用命令

### 构建和运行
```bash
cargo build          # 编译项目
cargo run            # 构建并运行应用程序
cargo check          # 快速语法和类型检查
```

### 开发
```bash
cargo test           # 运行测试（如果有）
cargo clippy         # 代码检查
cargo fmt            # 代码格式化
```

### 发布
```bash
cargo build --release    # 优化构建
cargo run --release      # 运行优化版本
```

## 语言要求
- **主要语言**: 所有文档、注释和交流使用中文
- **代码注释**: 使用中文解释复杂逻辑
- **错误消息**: 面向用户的错误应使用中文
- **文档**: README 和技术文档使用中文

## 配置要求
- 运行前创建包含邮件凭据的 `config.toml` 文件
- 确保邮件提供商启用了 IMAP/SMTP 访问
- 某些提供商可能需要应用专用密码
- 配置文件使用 TOML 格式，支持结构化配置